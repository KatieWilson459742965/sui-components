@import '~@s-ui/theme/lib/index';
@import '~@s-ui/react-atom-icon/lib/index';

$base-class: '.react-AtomActionButton';

$c-atom-action-button-neutral: color-variation($c-gray, 2);

$c-accent-active: color-variation($c-accent, -2) !default;
$c-neutral-active: color-variation($c-atom-action-button-neutral, -2) !default;
$c-primary-active: color-variation($c-primary, -2) !default;

$c-accent-disabled: color-variation($c-accent, 4) !default;
$c-neutral-disabled: color-variation($c-atom-action-button-neutral, 4) !default;
$c-primary-disabled: color-variation($c-primary, 4) !default;

$c-accent-hover: color-variation($c-accent, 1) !default;
$c-neutral-hover: color-variation($c-gray, 3) !default;
$c-primary-hover: color-variation($c-primary, 1) !default;

$c-accent-hover-2: color-variation($c-accent, 4) !default;
$c-neutral-hover-2: color-variation($c-gray, 5) !default;
$c-primary-hover-2: color-variation($c-primary, 4) !default;

$c-atom-action-button-colors: (
  'accent': (
    $c-accent,
    $c-white,
    $c-accent-active,
    $c-accent-disabled,
    $c-accent-hover,
    $c-accent-hover-2
  ),
  'neutral': (
    $c-atom-action-button-neutral,
    $c-white,
    $c-neutral-active,
    $c-neutral-disabled,
    $c-neutral-hover,
    $c-neutral-hover-2
  ),
  'primary': (
    $c-primary,
    $c-white,
    $c-primary-active,
    $c-primary-disabled,
    $c-primary-hover,
    $c-primary-hover-2
  )
) !default;

$bdrs-atom-action-button: $bdrs-m !default;
$bdrs-atom-action-button-icon: $bdrs-rounded !default;

$ff-atom-action-button: $ff-sans-serif !default;
$fz-atom-action-button: $fz-m !default;
$fw-atom-action-button: $fw-semi-bold !default;

$icon-m-atom-action-button: $m-m !default;

$icon-sz-atom-action-button-small: $sz-icon-l !default;
$icon-sz-atom-action-button: $sz-icon-xl !default;
$icon-sz-atom-action-button-large: $sz-icon-xxl !default;

$p-atom-action-button: $p-m !default;
$sz-atom-action-button: $p-base * 5 !default;

$tt-atom-action-button: none !default;

$icon-fill-color: currentColor !default;
$icon-stroke-color: currentColor !default;

// Sets active states when button is not disabled
@mixin action-button-focused {
  &#{$base-class}--focused,
  &:active {
    @content;
  }
  @media (hover: hover) {
    &:hover {
      @content;
    }
  }
}

@mixin action-button-icon($size) {
  & #{$base-class}-icon {
    height: $size;
    width: $size;
  }
}

#{$base-class} {
  @include reset-button;
  @include action-button-icon($icon-sz-atom-action-button);

  align-items: center;
  background: none;
  border: none;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  font: {
    family: $ff-atom-action-button;
    size: $fz-atom-action-button;
    weight: $fw-atom-action-button;
  }
  line-height: normal;
  min-width: $sz-atom-action-button;
  outline: 0;
  padding: $p-atom-action-button;
  text-transform: $tt-atom-action-button;
  white-space: nowrap;

  & + & {
    margin-left: $m-m;
  }

  &-inner {
    align-items: center;
    display: flex;
    height: 100%;
    pointer-events: none;
  }

  // Icon
  &-icon {
    align-items: center;
    border-radius: $bdrs-atom-action-button-icon;
    display: flex;
    justify-content: center;
    margin-bottom: $m-m;

    svg {
      fill: $icon-fill-color;
      stroke: $icon-stroke-color;
    }
  }

  // Types and colors
  @each $name, $pair in $c-atom-action-button-colors {
    $color: nth($pair, 1);
    $color-invert: nth($pair, 2);
    $color-active: nth($pair, 3);
    $color-disabled: nth($pair, 4);
    $color-hover: nth($pair, 5);
    $color-hover-2: nth($pair, 6);

    &--#{$name}Color {
      color: $color;

      &#{$base-class}--filledNegative {
        & #{$base-class}-icon {
          background: $color;
          color: $color-invert;
        }
        &:hover #{$base-class}-icon {
          background: $color-hover;
          color: $color-invert;
        }
      }

      &#{$base-class}--filledPositive {
        & #{$base-class}-icon {
          background: color-variation($color, 3);
        }
        &:hover #{$base-class}-icon {
          background: $color-hover-2;
        }
      }

      &#{$base-class}--outline {
        & #{$base-class}-icon {
          background: none;
          border: 1px solid $color;
        }
        &:hover #{$base-class}-icon {
          background: $color-hover-2;
        }
      }

      &#{$base-class}--flat {
        & #{$base-class}-icon {
          background: none;
        }
        &:hover {
          background: $color-hover-2;
        }
      }
    }
  }

  // Modifiers
  &--disabled {
    cursor: default;
    opacity: 0.3;
    pointer-events: none;
  }

  &--small {
    @include action-button-icon($icon-sz-atom-action-button-small);
  }

  &--large {
    @include action-button-icon($icon-sz-atom-action-button-large);
  }

  &--link {
    &,
    &:hover {
      text-decoration: none;
    }
  }
}
